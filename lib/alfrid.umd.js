!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).alfrid={})}(this,(function(t){"use strict";var e="undefined"!=typeof Float32Array?Float32Array:Array;function i(){var t=new e(9);return e!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function s(){var t=new e(16);return e!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});const n=()=>{const t=document.createElement("canvas");return!!(t.getContext("experimental-webgl2")||t.getContext("webgl2"))},a=(()=>{let t=!1;return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&(t=!0),t})();let r;const h=new class{constructor(){this._viewport=[0,0,0,0],this._enabledVertexAttribute=[],this.identityMatrix=s(),this._normalMatrix=i(),this._inverseModelViewMatrix=i(),this._modelMatrix=s(),this._matrix=s(),this._matrixStacks=[],this._lastMesh=null,this._useWebGL2=!1,this._hasArrayInstance=!1,this._extArrayInstance=!1,this.isMobile=a}init(t,e={}){null!=t?(void 0!==this.canvas&&null!==this.canvas&&this.destroy(),this.canvas=t,this.setSize(window.innerWidth,window.innerHeight),this.webgl2=!!e.webgl2&&n(),console.log("this.webgl2",this.webgl2,e)):console.error("Canvas not exist")}initWithGL(t){this.canvas||(this.canvas=t.canvas),r=this.gl=t}setSize(t,e){this._width=t,this._height=e,this.canvas.width=this._width,this.canvas.height=this._height,this._aspectRatio=this._width/this._height,r&&this.viewport(0,0,this._width,this._height)}destroy(){if(this.canvas.parentNode)try{this.canvas.parentNode.removeChild(this.canvas)}catch(t){console.log("Error : ",t)}this.canvas=null}};t.GL=h,t.checkWebGL2=n,Object.defineProperty(t,"__esModule",{value:!0})}));
