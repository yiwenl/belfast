var t="undefined"!=typeof Float32Array?Float32Array:Array;function i(){var i=new t(9);return t!=Float32Array&&(i[1]=0,i[2]=0,i[3]=0,i[5]=0,i[6]=0,i[7]=0),i[0]=1,i[4]=1,i[8]=1,i}function e(){var i=new t(16);return t!=Float32Array&&(i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[11]=0,i[12]=0,i[13]=0,i[14]=0),i[0]=1,i[5]=1,i[10]=1,i[15]=1,i}Math.hypot||(Math.hypot=function(){for(var t=0,i=arguments.length;i--;)t+=arguments[i]*arguments[i];return Math.sqrt(t)});const s=()=>{const t=document.createElement("canvas");return!!(t.getContext("experimental-webgl2")||t.getContext("webgl2"))},a=(()=>{let t=!1;return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&(t=!0),t})();let n;const h=new class{constructor(){this._viewport=[0,0,0,0],this._enabledVertexAttribute=[],this.identityMatrix=e(),this._normalMatrix=i(),this._inverseModelViewMatrix=i(),this._modelMatrix=e(),this._matrix=e(),this._matrixStacks=[],this._lastMesh=null,this._useWebGL2=!1,this._hasArrayInstance=!1,this._extArrayInstance=!1,this.isMobile=a}init(t,i={}){null!=t?(void 0!==this.canvas&&null!==this.canvas&&this.destroy(),this.canvas=t,this.setSize(window.innerWidth,window.innerHeight),this.webgl2=!!i.webgl2&&s(),console.log("this.webgl2",this.webgl2,i)):console.error("Canvas not exist")}initWithGL(t){this.canvas||(this.canvas=t.canvas),n=this.gl=t}setSize(t,i){this._width=t,this._height=i,this.canvas.width=this._width,this.canvas.height=this._height,this._aspectRatio=this._width/this._height,n&&this.viewport(0,0,this._width,this._height)}destroy(){if(this.canvas.parentNode)try{this.canvas.parentNode.removeChild(this.canvas)}catch(t){console.log("Error : ",t)}this.canvas=null}};export{h as GL,s as checkWebGL2};
